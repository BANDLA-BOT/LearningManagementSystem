"use strict";var courseModel=require("../../models/course/courseModel.js"),student=require("../../models/users/studentModel.js"),dashboardController=function(e,r){var t,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(student.find().limit(20));case 3:return t=e.sent,e.next=6,regeneratorRuntime.awrap(courseModel.find().limit(20));case 6:if(s=e.sent,t&&s){e.next=9;break}return e.abrupt("return",r.status(404).json({message:"Error while fetching Data"}));case 9:r.status(200).json({message:"Fetched Data",courses:s,students:t}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r.status(500).json({message:"Internal server error",error:e.t0.message});case 15:case"end":return e.stop()}},null,null,[[0,12]])},searchController=function(r,t){var s,n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.query.q,e.next=4,regeneratorRuntime.awrap(courseModel.find({$or:[{title:{$regex:s,$options:"i"}}]}));case 4:return n=e.sent,e.next=7,regeneratorRuntime.awrap(student.find({$or:[{firstname:{$regex:s,$options:"i"}},{lastname:{$regex:s,$options:"i"}},{email:{$regex:s,$options:"i"}}]}));case 7:if(a=e.sent,n&&a){e.next=10;break}return e.abrupt("return",t.status(404).json({message:"Not found"}));case 10:t.status(200).json({message:"Results fetched",Students:a,courses:n}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t.status(500).json({message:"Internal server error",error:e.t0.message});case 16:case"end":return e.stop()}},null,null,[[0,13]])};module.exports={dashboardController:dashboardController,searchController:searchController};
//# sourceMappingURL=dashboardController.min.js.map
