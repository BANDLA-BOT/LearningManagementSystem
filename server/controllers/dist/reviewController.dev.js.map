{"version":3,"sources":["reviewController.js"],"names":["courseModel","require","studentModel","reviewController","req","res","courseId","params","userId","user","review","body","findById","course","_id","id","student","status","json","message","reviews","push","reviewBy","save","deleteReview","reviewedUserId","findByIdAndUpdate","$pull","deletedReview","error","module","exports"],"mappings":";;AAAA,IAAMA,WAAW,GAAGC,OAAO,CAAC,iCAAD,CAA3B;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,iCAAD,CAA5B;;AAEA,IAAME,gBAAgB,GAAI,SAApBA,gBAAoB,CAAMC,GAAN,EAAUC,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACdC,UAAAA,QADc,GACDF,GAAG,CAACG,MADH,CACdD,QADc;AAEhBE,UAAAA,MAFgB,GAEPJ,GAAG,CAACK,IAFG;AAGfC,UAAAA,MAHe,GAGLN,GAAG,CAACO,IAHC,CAGfD,MAHe;AAAA;AAAA;AAAA,0CAKGV,WAAW,CAACY,QAAZ,CAAqBN,QAArB,CALH;;AAAA;AAKZO,UAAAA,MALY;AAAA;AAAA,0CAMIX,YAAY,CAACU,QAAb,CAAsB;AAACE,YAAAA,GAAG,EAACN,MAAM,CAACO;AAAZ,WAAtB,CANJ;;AAAA;AAMZC,UAAAA,OANY;;AAAA,gBAOf,CAACH,MAAD,IAAW,CAACG,OAPG;AAAA;AAAA;AAAA;;AAAA,2CAQPX,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,YAAAA,OAAO,EAAC;AAAT,WAArB,CARO;;AAAA;AAUlBN,UAAAA,MAAM,CAACO,OAAP,CAAeC,IAAf,CAAoB;AAChBC,YAAAA,QAAQ,EAAC;AACLd,cAAAA,MAAM,EAACQ,OAAO,CAACF,GADV;AAELJ,cAAAA,MAAM,EAANA;AAFK;AADO,WAApB;AAVkB;AAAA,0CAgBZG,MAAM,CAACU,IAAP,EAhBY;;AAAA;AAiBlBlB,UAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,YAAAA,OAAO,EAAC;AAAT,WAArB;AAjBkB;AAAA;;AAAA;AAAA;AAAA;AAoBlBd,UAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAE,YAAMA;AAAjB,WAArB;;AApBkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA1B;;AAuBA,IAAMK,YAAY,GAAG,SAAfA,YAAe,CAAMpB,GAAN,EAAWC,GAAX;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAEwBD,GAAG,CAACG,MAF5B,EAELkB,cAFK,eAELA,cAFK,EAEWnB,QAFX,eAEWA,QAFX;AAAA;AAAA,0CAGeN,WAAW,CAAC0B,iBAAZ,CACxBpB,QADwB,EAExB;AACIqB,YAAAA,KAAK,EAAC;AAACP,cAAAA,OAAO,EAAC;AAAC,mCAAkBK;AAAnB;AAAT;AADV,WAFwB,EAKxB;AACI,mBAAI;AADR,WALwB,CAHf;;AAAA;AAGPG,UAAAA,aAHO;AAYbvB,UAAAA,GAAG,CAACa,IAAJ,CAAS;AAACC,YAAAA,OAAO,EAAC,6BAAT;AAAwCS,YAAAA,aAAa,EAACA;AAAtD,WAAT;AAZa;AAAA;;AAAA;AAAA;AAAA;AAcbvB,UAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,YAAAA,OAAO,EAAC,uBAAT;AAAkCU,YAAAA,KAAK,EAAC,aAAMV;AAA9C,WAArB;;AAda;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB;;AAkBAW,MAAM,CAACC,OAAP,GAAiB;AAAC5B,EAAAA,gBAAgB,EAAhBA,gBAAD;AAAmBqB,EAAAA,YAAY,EAAZA;AAAnB,CAAjB","sourcesContent":["const courseModel = require('../models/course/courseModel.js')\r\nconst studentModel = require('../models/users/studentModel.js')\r\n\r\nconst reviewController  = async(req,res)=>{\r\n    const { courseId } = req.params\r\n    const userId = req.user\r\n    const {review} = req.body\r\n    try {\r\n        const course = await courseModel.findById(courseId)\r\n        const student = await studentModel.findById({_id:userId.id})\r\n        if(!course || !student){\r\n            return res.status(404).json({message:\"Course not found\"})\r\n        }\r\n        course.reviews.push({\r\n            reviewBy:{\r\n                userId:student._id,\r\n                review\r\n            }\r\n        })\r\n        await course.save()\r\n        res.status(201).json({message:\"Review added successfully\"})\r\n        \r\n    } catch (error) {\r\n        res.status(500).json({ message: error.message });\r\n    }\r\n}\r\nconst deleteReview = async(req, res)=>{\r\n    try {\r\n        const { reviewedUserId, courseId } = req.params\r\n        const deletedReview = await courseModel.findByIdAndUpdate(\r\n            courseId,   \r\n            {\r\n                $pull:{reviews:{'reviewBy.userId':reviewedUserId}}\r\n            },\r\n            {\r\n                new:true\r\n            }\r\n        )\r\n        res.json({message:\"Review deleted successfully\", deletedReview:deletedReview})\r\n    } catch (error) {\r\n        res.status(500).json({message:\"Internal server error\", error:error.message})\r\n    }\r\n}\r\n\r\nmodule.exports = {reviewController, deleteReview}"],"file":"reviewController.dev.js"}