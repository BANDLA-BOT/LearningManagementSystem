"use strict";var CourseModel=require("../models/course/courseModel.js"),multer=require("multer"),path=require("path"),storage=multer.diskStorage({destination:function(e,r,t){t(null,"videos/")},filename:function(e,r,t){t(null,Date.now()+path.extname(r.originalname))}}),upload=multer({storage:storage});exports.upload=upload.fields([{name:"videosFile",maxCount:1},{name:"thumbnail",maxCount:1}]);var createCourse=function(r,t){var n,o,s,a,i,u,c,l,d,m;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,o=n.title,s=n.price,a=n.rating,i=n.reviews,u=n.resources,c=n.description,l=n.instructor,d=n.section,m=new CourseModel({title:o,price:s,rating:a,reviews:i,description:c,instructor:l,resources:u,section:d}),e.next=5,regeneratorRuntime.awrap(m.save());case 5:t.json({message:"Course created successfully",Course:m}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.status(500).json({message:"Internal server error",Error:e.t0.message});case 11:case"end":return e.stop()}},null,null,[[0,8]])},addVideos=function(r){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:try{r.files.videoFile||[],t=r.files.thumbnail||[],n=JSON.parse(section),n.map(function(e,r){video.filter(function(e){return e.filename==="section[".concat(r,"].video")}).map(function(e,r){return{title:e.originalname,thumbnail:t[r]?"/videos/".concat(t[r].filename):"",videoFile:"/videos/".concat(e.filename)}})})}catch(e){}case 1:case"end":return e.stop()}})};module.exports={createCourse:createCourse,addVideos:addVideos};
//# sourceMappingURL=CreateCourseController.min.js.map
