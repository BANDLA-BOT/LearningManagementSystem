{"version":3,"sources":["reviewController.js"],"names":["courseModel","require","studentModel","reviewController","req","res","courseId","params","userId","user","review","body","findById","course","_id","id","student","status","json","message","reviews","push","reviewBy","save","deleteReview","reviewId","reviewDelete","map","item","toString","deleteOne","module","exports"],"mappings":";;AAAA,IAAMA,WAAW,GAAGC,OAAO,CAAC,iCAAD,CAA3B;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,oCAAD,CAA5B;;AAEA,IAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,UAAAA,QADe,GACFF,GAAG,CAACG,MADF,CACfD,QADe;AAEjBE,UAAAA,MAFiB,GAERJ,GAAG,CAACK,IAFI;AAGfC,UAAAA,MAHe,GAGJN,GAAG,CAACO,IAHA,CAGfD,MAHe;AAAA;AAAA;AAAA,0CAKAV,WAAW,CAACY,QAAZ,CAAqBN,QAArB,CALA;;AAAA;AAKfO,UAAAA,MALe;AAAA;AAAA,0CAMCX,YAAY,CAACU,QAAb,CAAsB;AAAEE,YAAAA,GAAG,EAAEN,MAAM,CAACO;AAAd,WAAtB,CAND;;AAAA;AAMfC,UAAAA,OANe;;AAAA,gBAOjB,CAACH,MAAD,IAAW,CAACG,OAPK;AAAA;AAAA;AAAA;;AAAA,2CAQZX,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAArB,CARY;;AAAA;AAUrBN,UAAAA,MAAM,CAACO,OAAP,CAAeC,IAAf,CAAoB;AAClBC,YAAAA,QAAQ,EAAE;AACRd,cAAAA,MAAM,EAAEQ,OAAO,CAACF,GADR;AAERJ,cAAAA,MAAM,EAANA;AAFQ;AADQ,WAApB;AAVqB;AAAA,0CAgBfG,MAAM,CAACU,IAAP,EAhBe;;AAAA;AAiBrBlB,UAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAArB;AAjBqB;AAAA;;AAAA;AAAA;AAAA;AAmBrBd,UAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAE,YAAMA;AAAjB,WAArB;;AAnBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAzB;;AAsBA,IAAMK,YAAY,GAAG,SAAfA,YAAe,CAAOpB,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAEcD,GAAG,CAACG,MAFlB,EAETD,QAFS,eAETA,QAFS,EAECmB,QAFD,eAECA,QAFD;AAAA;AAAA,0CAGIzB,WAAW,CAACY,QAAZ,CAAqBN,QAArB,CAHJ;;AAAA;AAGXO,UAAAA,MAHW;AAIXO,UAAAA,OAJW,GAIDP,MAAM,CAACO,OAJN;AAKXM,UAAAA,YALW,GAKIN,OAAO,CAACO,GAAR,CAAY,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA,0BAC3BA,IAAI,CAACd,GAAL,CAASe,QAAT,OAAwBJ,QADG;AAAA;AAAA;AAAA;;AAAA;AAAA,oDAEvBG,IAAI,CAACE,SAAL,CAAe;AAAEL,sBAAAA,QAAQ,EAARA;AAAF,qBAAf,CAFuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAZ,CALJ;AAAA;AAAA,0CAUXZ,MAAM,CAACU,IAAP,EAVW;;AAAA;AAYjBlB,UAAAA,GAAG,CAACa,IAAJ,CAASQ,YAAT;AAZiB;AAAA;;AAAA;AAAA;AAAA;AAcjBrB,UAAAA,GAAG,CAACa,IAAJ,CAAS,aAAMC,OAAf;;AAdiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB;;AAkBAY,MAAM,CAACC,OAAP,GAAiB;AAAE7B,EAAAA,gBAAgB,EAAhBA;AAAF,CAAjB","sourcesContent":["const courseModel = require(\"../../models/course/courseModel\");\r\nconst studentModel = require(\"../../models/users/studentModel.js\");\r\n\r\nconst reviewController = async (req, res) => {\r\n  const { courseId } = req.params;\r\n  const userId = req.user;\r\n  const { review } = req.body;\r\n  try {\r\n    const course = await courseModel.findById(courseId);\r\n    const student = await studentModel.findById({ _id: userId.id });\r\n    if (!course || !student) {\r\n      return res.status(404).json({ message: \"Course not found\" });\r\n    }\r\n    course.reviews.push({\r\n      reviewBy: {\r\n        userId: student._id,\r\n        review,\r\n      },\r\n    });\r\n    await course.save();\r\n    res.status(201).json({ message: \"Review added successfully\" });\r\n  } catch (error) {\r\n    res.status(500).json({ message: error.message });\r\n  }\r\n};\r\nconst deleteReview = async (req, res) => {\r\n  try {\r\n    const { courseId, reviewId } = req.params;\r\n    const course = await courseModel.findById(courseId);\r\n    const reviews = course.reviews;\r\n    const reviewDelete = reviews.map(async (item) => {\r\n      if (item._id.toString() === reviewId) {\r\n        await item.deleteOne({ reviewId });\r\n      }\r\n    });\r\n    await course.save();\r\n\r\n    res.json(reviewDelete);\r\n  } catch (error) {\r\n    res.json(error.message);\r\n  }\r\n};\r\n\r\nmodule.exports = { reviewController};\r\n"],"file":"reviewController.dev.js"}