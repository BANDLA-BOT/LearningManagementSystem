{"version":3,"sources":["dashboard.js"],"names":["express","require","multer","router","Router","fs","adminTokenDecode","verifyToken","instructorTokenVerify","dashboardController","searchController","createCourse","resourceController","uploadVideos","getProfile","enrollCourse","topRanks","progressController","courseProgress","filter","sorting","markVideoAsComplete","completedCourses","ratingController","topDiscussions","askQuestion","editProfile","login","resetPasswordLink","resetPassword","register","editPassword","editInstructorProfile","mentorsController","registerController","loginController","questionsController","answerController","storage","memoryStorage","upload","resourceStorage","diskStorage","destination","req","file","cb","filename","Date","now","originalname","uploadResources","existsSync","mkdirSync","InstructorProfileStorage","InstructorUploads","updateProfilePic","uploadProfilePic","get","post","single","put","module","exports"],"mappings":"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","sourcesContent":["const express = require(\"express\");\r\nconst multer = require(\"multer\");\r\nconst router = express.Router();\r\nconst fs = require('fs')\r\n\r\n//JWT DECODED TOKENS\r\n\r\nconst adminTokenDecode = require(\"../../utils/AdminTokenVerify.js\");\r\nconst verifyToken = require(\"../../utils/verifyToken.js\");\r\nconst instructorTokenVerify = require('../../utils/instructorTokenVerify.js')\r\n\r\n//Admin imports\r\n\r\nconst {\r\n  dashboardController,\r\n  searchController,\r\n  createCourse,\r\n  resourceController,\r\n  uploadVideos,\r\n} = require(\"../../controllers/admin/dashboardController.js\");\r\n\r\n//Student imports\r\n\r\nconst {\r\n  getProfile,\r\n  enrollCourse,\r\n  topRanks,\r\n  progressController,\r\n  courseProgress,\r\n  filter,\r\n  sorting,\r\n  markVideoAsComplete,\r\n  completedCourses,\r\n  ratingController,\r\n  topDiscussions,\r\n  askQuestion,\r\n  editProfile,\r\n} = require(\"../../controllers/student/dashboardcontroller.js\");\r\nconst { \r\n  login, \r\n  resetPasswordLink, \r\n  resetPassword, \r\n  register \r\n} = require(\"../../controllers/student/authController.js\");\r\n\r\n\r\n//Instructor Imports\r\n\r\nconst {\r\n  editPassword,\r\n  editInstructorProfile,\r\n  mentorsController,\r\n} = require(\"../../controllers/instructor/dashboardController.js\");\r\nconst { \r\n  registerController,\r\n   loginController\r\n} = require(\"../../controllers/instructor/authController.js\");\r\nconst questionsController = require(\"../../controllers/instructor/questionController.js\");\r\nconst answerController = require(\"../../controllers/instructor/answerController.js\");\r\n\r\n\r\n\r\n\r\n\r\n//Multer for videos upload\r\nconst storage = multer.memoryStorage();\r\nconst upload = multer({ storage: storage });\r\n\r\n\r\n\r\n\r\n//Multer to upload resources\r\nconst resourceStorage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"resources\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, `${Date.now()}-${file.originalname}`);\r\n  },\r\n});\r\nconst uploadResources = multer({\r\n  storage: resourceStorage,\r\n});\r\n\r\n\r\n//Multer for profile photo for Instructor\r\nif(!fs.existsSync('/uploads')){\r\n  fs.mkdirSync('/uploads')\r\n}\r\nconst InstructorProfileStorage = multer.diskStorage({\r\n  destination:(req,file,cb)=>{\r\n      cb(null, '/uploads')\r\n  },\r\n  filename:(req, file, cb)=>{\r\n      cb(null, `${Date.now()}-Instructor-${file.originalname}`)\r\n  }\r\n})\r\nconst InstructorUploads = multer({\r\n  storage:InstructorProfileStorage\r\n})\r\n\r\n//Multer for update profilePicture of instructor\r\n\r\nconst updateProfilePic = multer.diskStorage({\r\n  destination:(req,file,cb)=>{\r\n    cb(null, 'instructorProfilesPics')\r\n  },\r\n  filename:(req,file,cb)=>{\r\n    cb(null,`${Date.now()}-${file.originalname}`)\r\n}\r\n})\r\nconst uploadProfilePic = multer({\r\n  storage:updateProfilePic\r\n})\r\n\r\n\r\n\r\n//admin\r\nrouter.get(\"/\", adminTokenDecode, dashboardController);\r\nrouter.get(\"/search\", adminTokenDecode, searchController);\r\nrouter.post(\"/create/:instructorId\", adminTokenDecode, createCourse);\r\nrouter.post(\"/uploadvideos/:courseId\",upload.single(\"video\"),adminTokenDecode,uploadVideos);\r\nrouter.post(\"/resources/:courseId\",uploadResources.single(\"file\"),adminTokenDecode,resourceController);\r\n\r\n\r\n//student Access\r\nrouter.post('/student/register', upload.single('profile'), adminTokenDecode, register);\r\nrouter.post('/student/request-reset-password',adminTokenDecode, resetPasswordLink)\r\nrouter.post('/student/reset-password/:token', adminTokenDecode,resetPassword)\r\nrouter.post(\"/student/login\", adminTokenDecode, login);\r\nrouter.get(\"/student/profile\", verifyToken, getProfile);\r\nrouter.put(\"/student/editProfile\", verifyToken, editProfile);\r\nrouter.put(\"/stuednt/editpassword\", verifyToken, editPassword);\r\nrouter.post(\"/student/enroll/:courseId\", verifyToken, enrollCourse);\r\nrouter.put(\"/student/markvideoascomplete/:courseId/:videoArrId/:videoId\",verifyToken,markVideoAsComplete);\r\nrouter.get(\"/student/completedCourses\", verifyToken, completedCourses);\r\nrouter.get(\"/student/ranking\", verifyToken, topRanks);\r\nrouter.get(\"/student/progress\", verifyToken, progressController);\r\nrouter.get(\"/student/courseprogress\", verifyToken, courseProgress);\r\nrouter.get(\"/student/filter\", filter);\r\nrouter.get(\"/student/sorting\", sorting);\r\nrouter.post(\"/student/rate/:courseId/rate\", verifyToken, ratingController);\r\nrouter.post(\"/student/ask/:courseId/:videoId\", verifyToken, askQuestion);\r\nrouter.get(\"/student/topDiscuss/:courseId/:videoId\",verifyToken,topDiscussions);\r\n\r\n\r\n\r\n//Instructor Access\r\nrouter.post('/instructor/register', upload.single('profile'), adminTokenDecode, registerController)\r\nrouter.post('/instructor/login', adminTokenDecode, loginController)\r\nrouter.put('/instructor/editprofile', uploadProfilePic.single('updatedProfilePic'),instructorTokenVerify, editInstructorProfile)\r\nrouter.put('/instructor/editpassword', instructorTokenVerify, editPassword)\r\nrouter.get('/instructor/mentors', instructorTokenVerify, mentorsController)\r\nrouter.get('/instructor/discussions', instructorTokenVerify, questionsController)\r\nrouter.post('/instructor/answer/:id/:courseId', instructorTokenVerify, answerController)\r\n\r\nmodule.exports = router;\r\n"],"file":"dashboard.dev.js"}