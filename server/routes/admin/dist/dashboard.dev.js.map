{"version":3,"sources":["dashboard.js"],"names":["express","require","multer","router","Router","fs","adminTokenDecode","verifyToken","instructorTokenVerify","dashboardController","searchController","createCourse","resourceController","uploadVideos","acceptCourseRequest","getProfile","enrollCourse","topRanks","progressController","courseProgress","filter","sorting","markVideoAsComplete","completedCourses","ratingController","topDiscussions","askQuestion","editProfile","login","resetPasswordLink","resetPassword","register","editPassword","editInstructorProfile","mentorsController","registerController","loginController","questionsController","answerController","storage","memoryStorage","upload","resourceStorage","diskStorage","destination","req","file","cb","filename","Date","now","originalname","uploadResources","existsSync","mkdirSync","InstructorProfileStorage","InstructorUploads","updateProfilePic","uploadProfilePic","get","post","single","put","module","exports"],"mappings":"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","sourcesContent":["const express = require(\"express\");\r\nconst multer = require(\"multer\");\r\nconst router = express.Router();\r\nconst fs = require('fs')\r\n\r\n//JWT DECODED TOKENS\r\n\r\nconst adminTokenDecode = require(\"../../utils/AdminTokenVerify.js\");\r\nconst verifyToken = require(\"../../utils/verifyToken.js\");\r\nconst instructorTokenVerify = require('../../utils/instructorTokenVerify.js')\r\n\r\n//Admin imports\r\n\r\nconst {\r\n  dashboardController,\r\n  searchController,\r\n  createCourse,\r\n  resourceController,\r\n  uploadVideos,\r\n  acceptCourseRequest\r\n} = require(\"../../controllers/admin/dashboardController.js\");\r\n\r\n//Student imports\r\n\r\nconst {\r\n  getProfile,\r\n  enrollCourse,\r\n  topRanks,\r\n  progressController,\r\n  courseProgress,\r\n  filter,\r\n  sorting,\r\n  markVideoAsComplete,\r\n  completedCourses,\r\n  ratingController,\r\n  topDiscussions,\r\n  askQuestion,\r\n  editProfile,\r\n} = require(\"../../controllers/student/dashboardcontroller.js\");\r\nconst { \r\n  login, \r\n  resetPasswordLink, \r\n  resetPassword, \r\n  register \r\n} = require(\"../../controllers/student/authController.js\");\r\n\r\n\r\n//Instructor Imports\r\n\r\nconst {\r\n  editPassword,\r\n  editInstructorProfile,\r\n  mentorsController,\r\n} = require(\"../../controllers/instructor/dashboardController.js\");\r\nconst { \r\n  registerController,\r\n   loginController\r\n} = require(\"../../controllers/instructor/authController.js\");\r\nconst questionsController = require(\"../../controllers/instructor/questionController.js\");\r\nconst answerController = require(\"../../controllers/instructor/answerController.js\");\r\n\r\n\r\n\r\n\r\n\r\n//Multer for videos upload\r\nconst storage = multer.memoryStorage();\r\nconst upload = multer({ storage: storage });\r\n\r\n\r\n\r\n\r\n//Multer to upload resources\r\nconst resourceStorage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"resources\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, `${Date.now()}-${file.originalname}`);\r\n  },\r\n});\r\nconst uploadResources = multer({\r\n  storage: resourceStorage,\r\n});\r\n\r\n\r\n//Multer for profile photo for Instructor\r\nif(!fs.existsSync('/uploads')){\r\n  fs.mkdirSync('/uploads')\r\n}\r\nconst InstructorProfileStorage = multer.diskStorage({\r\n  destination:(req,file,cb)=>{\r\n      cb(null, '/uploads')\r\n  },\r\n  filename:(req, file, cb)=>{\r\n      cb(null, `${Date.now()}-Instructor-${file.originalname}`)\r\n  }\r\n})\r\nconst InstructorUploads = multer({\r\n  storage:InstructorProfileStorage\r\n})\r\n\r\n//Multer for update profilePicture of instructor\r\n\r\nconst updateProfilePic = multer.diskStorage({\r\n  destination:(req,file,cb)=>{\r\n    cb(null, 'instructorProfilesPics')\r\n  },\r\n  filename:(req,file,cb)=>{\r\n    cb(null,`${Date.now()}-${file.originalname}`)\r\n}\r\n})\r\nconst uploadProfilePic = multer({\r\n  storage:updateProfilePic\r\n})\r\n\r\n\r\n\r\n//admin\r\nrouter.get(\"/\", adminTokenDecode, dashboardController);\r\nrouter.get(\"/search\", adminTokenDecode, searchController);\r\nrouter.post(\"/create/:instructorId\", adminTokenDecode, createCourse);\r\nrouter.post(\"/uploadvideos/:courseId\",upload.single(\"video\"),adminTokenDecode,uploadVideos);\r\nrouter.post(\"/resources/:courseId\",uploadResources.single(\"file\"),adminTokenDecode,resourceController);\r\nrouter.put('/acceptcourserequest/:requestId', adminTokenDecode, acceptCourseRequest)\r\n\r\n\r\n//student Access\r\nrouter.post('/student/register', upload.single('profile'), adminTokenDecode, register);\r\nrouter.post('/student/request-reset-password',adminTokenDecode, resetPasswordLink)\r\nrouter.post('/student/reset-password/:token', adminTokenDecode,resetPassword)\r\nrouter.post(\"/student/login\", adminTokenDecode, login);\r\nrouter.get(\"/student/profile\", verifyToken, getProfile);\r\nrouter.put(\"/student/editProfile\", verifyToken, editProfile);\r\nrouter.put(\"/stuednt/editpassword\", verifyToken, editPassword);\r\nrouter.post(\"/student/enroll/:courseId\", verifyToken, enrollCourse);\r\nrouter.put(\"/student/markvideoascomplete/:courseId/:videoArrId/:videoId\",verifyToken,markVideoAsComplete);\r\nrouter.get(\"/student/completedCourses\", verifyToken, completedCourses);\r\nrouter.get(\"/student/ranking\", verifyToken, topRanks);\r\nrouter.get(\"/student/progress\", verifyToken, progressController);\r\nrouter.get(\"/student/courseprogress\", verifyToken, courseProgress);\r\nrouter.get(\"/student/filter\", filter);\r\nrouter.get(\"/student/sorting\", sorting);\r\nrouter.post(\"/student/rate/:courseId/rate\", verifyToken, ratingController);\r\nrouter.post(\"/student/ask/:courseId/:videoId\", verifyToken, askQuestion);\r\nrouter.get(\"/student/topDiscuss/:courseId/:videoId\",verifyToken,topDiscussions);\r\n\r\n\r\n\r\n//Instructor Access\r\nrouter.post('/instructor/register', InstructorUploads.single('profile'), adminTokenDecode, registerController)\r\nrouter.post('/instructor/login', adminTokenDecode, loginController)\r\nrouter.put('/instructor/editprofile', uploadProfilePic.single('updatedProfilePic'),instructorTokenVerify, editInstructorProfile)\r\nrouter.put('/instructor/editpassword', instructorTokenVerify, editPassword)\r\nrouter.get('/instructor/mentors', instructorTokenVerify, mentorsController)\r\nrouter.get('/instructor/discussions', instructorTokenVerify, questionsController)\r\nrouter.post('/instructor/answer/:id/:courseId', instructorTokenVerify, answerController)\r\n\r\nmodule.exports = router;\r\n"],"file":"dashboard.dev.js"}