{"version":3,"sources":["dashboard.js"],"names":["express","require","multer","Router","fs","adminTokenDecode","verifyToken","instructorTokenVerify","searchController","dashboardController","createCourse","resourceController","uploadVideos","acceptCourseRequest","topDiscussions","getProfile","enrollCourse","topRanks","progressController","courseProgress","filter","sorting","markVideoAsComplete","completedCourses","ratingController","askQuestion","editProfile","resetPasswordLink","login","resetPassword","register","editPassword","editInstructorProfile","mentorsController","registerController","loginController","questionsController","answerController","storage","memoryStorage","upload","resourceStorage","Date","diskStorage","destination","req","file","cb","concat","now","originalname","mkdirSync","existsSync","filename","InstructorProfileStorage","InstructorUploads","uploadProfilePic","updateProfilePic","router","get","put","post","uploadResources","single","module","exports"],"mappings":"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","file":"dashboard.min.js","sourcesContent":["const express = require(\"express\");\r\nconst multer = require(\"multer\");\r\nconst router = express.Router();\r\nconst fs = require('fs')\r\n\r\n//JWT DECODED TOKENS\r\n\r\nconst adminTokenDecode = require(\"../../utils/AdminTokenVerify.js\");\r\nconst verifyToken = require(\"../../utils/verifyToken.js\");\r\nconst instructorTokenVerify = require('../../utils/instructorTokenVerify.js')\r\n\r\n//Admin imports\r\n\r\nconst {\r\n  dashboardController,\r\n  searchController,\r\n  createCourse,\r\n  resourceController,\r\n  uploadVideos,\r\n  acceptCourseRequest\r\n} = require(\"../../controllers/admin/dashboardController.js\");\r\n\r\n//Student imports\r\n\r\nconst {\r\n  getProfile,\r\n  enrollCourse,\r\n  topRanks,\r\n  progressController,\r\n  courseProgress,\r\n  filter,\r\n  sorting,\r\n  markVideoAsComplete,\r\n  completedCourses,\r\n  ratingController,\r\n  topDiscussions,\r\n  askQuestion,\r\n  editProfile,\r\n} = require(\"../../controllers/student/dashboardcontroller.js\");\r\nconst { \r\n  login, \r\n  resetPasswordLink, \r\n  resetPassword, \r\n  register \r\n} = require(\"../../controllers/student/authController.js\");\r\n\r\n\r\n//Instructor Imports\r\n\r\nconst {\r\n  editPassword,\r\n  editInstructorProfile,\r\n  mentorsController,\r\n} = require(\"../../controllers/instructor/dashboardController.js\");\r\nconst { \r\n  registerController,\r\n   loginController\r\n} = require(\"../../controllers/instructor/authController.js\");\r\nconst questionsController = require(\"../../controllers/instructor/questionController.js\");\r\nconst answerController = require(\"../../controllers/instructor/answerController.js\");\r\n\r\n\r\n\r\n\r\n\r\n//Multer for videos upload\r\nconst storage = multer.memoryStorage();\r\nconst upload = multer({ storage: storage });\r\n\r\n\r\n\r\n\r\n//Multer to upload resources\r\nconst resourceStorage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"resources\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, `${Date.now()}-${file.originalname}`);\r\n  },\r\n});\r\nconst uploadResources = multer({\r\n  storage: resourceStorage,\r\n});\r\n\r\n\r\n//Multer for profile photo for Instructor\r\nif(!fs.existsSync('/uploads')){\r\n  fs.mkdirSync('/uploads')\r\n}\r\nconst InstructorProfileStorage = multer.diskStorage({\r\n  destination:(req,file,cb)=>{\r\n      cb(null, '/uploads')\r\n  },\r\n  filename:(req, file, cb)=>{\r\n      cb(null, `${Date.now()}-Instructor-${file.originalname}`)\r\n  }\r\n})\r\nconst InstructorUploads = multer({\r\n  storage:InstructorProfileStorage\r\n})\r\n\r\n//Multer for update profilePicture of instructor\r\n\r\nconst updateProfilePic = multer.diskStorage({\r\n  destination:(req,file,cb)=>{\r\n    cb(null, 'instructorProfilesPics')\r\n  },\r\n  filename:(req,file,cb)=>{\r\n    cb(null,`${Date.now()}-${file.originalname}`)\r\n}\r\n})\r\nconst uploadProfilePic = multer({\r\n  storage:updateProfilePic\r\n})\r\n\r\n\r\n\r\n//admin\r\nrouter.get(\"/\", adminTokenDecode, dashboardController);\r\nrouter.get(\"/search\", adminTokenDecode, searchController);\r\nrouter.post(\"/create/:instructorId\", adminTokenDecode, createCourse);\r\nrouter.post(\"/uploadvideos/:courseId\",upload.single(\"video\"),adminTokenDecode,uploadVideos);\r\nrouter.post(\"/resources/:courseId\",uploadResources.single(\"file\"),adminTokenDecode,resourceController);\r\nrouter.put('/acceptcourserequest/:requestId', adminTokenDecode, acceptCourseRequest)\r\n\r\n\r\n//student Access\r\nrouter.post('/student/register', upload.single('profile'), adminTokenDecode, register);\r\nrouter.post('/student/request-reset-password',adminTokenDecode, resetPasswordLink)\r\nrouter.post('/student/reset-password/:token', adminTokenDecode,resetPassword)\r\nrouter.post(\"/student/login\", adminTokenDecode, login);\r\nrouter.get(\"/student/profile\", verifyToken, getProfile);\r\nrouter.put(\"/student/editProfile\", verifyToken, editProfile);\r\nrouter.put(\"/stuednt/editpassword\", verifyToken, editPassword);\r\nrouter.post(\"/student/enroll/:courseId\", verifyToken, enrollCourse);\r\nrouter.put(\"/student/markvideoascomplete/:courseId/:videoArrId/:videoId\",verifyToken,markVideoAsComplete);\r\nrouter.get(\"/student/completedCourses\", verifyToken, completedCourses);\r\nrouter.get(\"/student/ranking\", verifyToken, topRanks);\r\nrouter.get(\"/student/progress\", verifyToken, progressController);\r\nrouter.get(\"/student/courseprogress\", verifyToken, courseProgress);\r\nrouter.get(\"/student/filter\", filter);\r\nrouter.get(\"/student/sorting\", sorting);\r\nrouter.post(\"/student/rate/:courseId/rate\", verifyToken, ratingController);\r\nrouter.post(\"/student/ask/:courseId/:videoId\", verifyToken, askQuestion);\r\nrouter.get(\"/student/topDiscuss/:courseId/:videoId\",verifyToken,topDiscussions);\r\n\r\n\r\n\r\n//Instructor Access\r\nrouter.post('/instructor/register', InstructorUploads.single('profile'), adminTokenDecode, registerController)\r\nrouter.post('/instructor/login', adminTokenDecode, loginController)\r\nrouter.put('/instructor/editprofile', uploadProfilePic.single('updatedProfilePic'),instructorTokenVerify, editInstructorProfile)\r\nrouter.put('/instructor/editpassword', instructorTokenVerify, editPassword)\r\nrouter.get('/instructor/mentors', instructorTokenVerify, mentorsController)\r\nrouter.get('/instructor/discussions', instructorTokenVerify, questionsController)\r\nrouter.post('/instructor/answer/:id/:courseId', instructorTokenVerify, answerController)\r\n\r\nmodule.exports = router;\r\n"]}